<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Graphic Design App</title>

<!-- POLICES -->
<link href="https://fonts.googleapis.com/css2?family=Poppins&family=Roboto&family=Montserrat&display=swap" rel="stylesheet">

<style>
body{
margin:0;
font-family:Poppins;
display:flex;
height:100vh;
}

#tools{
width:230px;
background:#111;
color:white;
padding:15px;
}

button,select,input{
width:100%;
margin:5px 0;
padding:8px;
border:none;
border-radius:6px;
}

#canvasContainer{
flex:1;
background:#eee;
overflow:auto;
display:flex;
justify-content:center;
align-items:center;
}

#canvas{
width:900px;
height:600px;
background:white;
position:relative;
transform-origin:center;
}

.element{
position:absolute;
cursor:move;
padding:5px;
border:1px dashed transparent;
}

.element.selected{
border:1px dashed blue;
}
</style>
</head>

<body>

<div id="tools">
<h3>ðŸŽ¨ Outils</h3>

<button onclick="addText()">Ajouter texte</button>

<select id="fontSelect" onchange="changeFont()">
<option value="Poppins">Poppins</option>
<option value="Roboto">Roboto</option>
<option value="Montserrat">Montserrat</option>
</select>

<input type="color" onchange="changeColor(this.value)">
<button onclick="deleteElement()">ðŸ—‘ Supprimer</button>

<hr>

<button onclick="zoomIn()">Zoom +</button>
<button onclick="zoomOut()">Zoom -</button>

<input type="file" accept="image/*" onchange="addImage(event)">

</div>

<div id="canvasContainer">
<div id="canvas"></div>
</div>

<script>
let selected=null;
let zoom=1;

// AJOUT TEXTE
function addText(){
let el=document.createElement("div");
el.className="element";
el.innerText="Double clique pour modifier";
el.style.left="50px";
el.style.top="50px";
el.contentEditable=true;

addEvents(el);
canvas.appendChild(el);
}

// AJOUT IMAGE
function addImage(e){
let file=e.target.files[0];
let img=document.createElement("img");
img.src=URL.createObjectURL(file);
img.className="element";
img.style.width="150px";
img.style.left="80px";
img.style.top="80px";

addEvents(img);
canvas.appendChild(img);
}

// EVENEMENTS SELECTION + DRAG
function addEvents(el){
el.onclick=(ev)=>{
ev.stopPropagation();
select(el);
};

let offsetX,offsetY,isDown=false;

el.onmousedown=(e)=>{
isDown=true;
offsetX=e.offsetX;
offsetY=e.offsetY;
};

document.onmouseup=()=>isDown=false;

document.onmousemove=(e)=>{
if(!isDown || selected!==el) return;
el.style.left=(e.pageX-canvas.offsetLeft-offsetX)+"px";
el.style.top=(e.pageY-canvas.offsetTop-offsetY)+"px";
};
}

// SELECTION
function select(el){
document.querySelectorAll(".element").forEach(e=>e.classList.remove("selected"));
selected=el;
el.classList.add("selected");
}

// SUPPRIMER
function deleteElement(){
if(selected){
selected.remove();
selected=null;
}
}

// CHANGER POLICE
function changeFont(){
if(selected){
selected.style.fontFamily=document.getElementById("fontSelect").value;
}
}

// COULEUR
function changeColor(color){
if(selected){
selected.style.color=color;
}
}

// ZOOM
function zoomIn(){
zoom+=0.1;
canvas.style.transform="scale("+zoom+")";
}

function zoomOut(){
zoom-=0.1;
canvas.style.transform="scale("+zoom+")";
}

// CLIQUE VIDE = deselect
canvas.onclick=()=>{
document.querySelectorAll(".element").forEach(e=>e.classList.remove("selected"));
selected=null;
}
</script>

</body>
</html>
