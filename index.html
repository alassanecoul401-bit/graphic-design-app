<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Canva Dev</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>

<style>
body{
margin:0;
font-family:Arial;
background:#f0f2f5;
}

.toolbar{
background:white;
padding:10px;
display:flex;
gap:10px;
box-shadow:0 2px 8px rgba(0,0,0,.2);
}

canvas{
border:1px solid #ccc;
display:block;
margin:20px auto;
background:white;
}
</style>
</head>

<body>

<div class="toolbar">
<button onclick="addText()">ğŸ“ Texte</button>
<input type="file" id="imgUpload">
<input type="color" id="color">
<button onclick="save()">ğŸ’¾ Sauver</button>
<button onclick="load()">ğŸ“‚ Charger</button>
<button onclick="deleteObj()">ğŸ—‘ Supprimer</button>
</div>

<canvas id="c" width="400" height="500"></canvas>

<script>
const canvas = new fabric.Canvas('c');

/* Ajouter texte */
function addText(){
let text = new fabric.IText('Double clique pour modifier',{
left:100,
top:100,
fill:document.getElementById("color").value,
fontSize:24
});
canvas.add(text);
}

/* Ajouter image */
document.getElementById("imgUpload").onchange=function(e){
const reader=new FileReader();
reader.onload=function(f){
fabric.Image.fromURL(f.target.result,function(img){
img.scaleToWidth(150);
canvas.add(img);
});
};
reader.readAsDataURL(e.target.files[0]);
};

/* Supprimer */
function deleteObj(){
canvas.remove(canvas.getActiveObject());
}

/* Sauvegarde */
function save(){
localStorage.setItem("design",
JSON.stringify(canvas.toJSON()));
alert("Design sauvegardÃ© !");
}

/* Charger */
function load(){
canvas.loadFromJSON(
localStorage.getItem("design"),
canvas.renderAll.bind(canvas)
);
}
</script>

</body>
</html>
