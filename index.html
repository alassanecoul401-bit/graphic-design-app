<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Design 5G</title>

<style>

body{
margin:0;
font-family:Arial;
background:#f2f2f2;
overflow:hidden;
}

/* ===== ACCUEIL ===== */

#home{
padding:20px;
}

h1{
text-align:center;
}

.grid{
display:grid;
grid-template-columns:repeat(3,1fr);
gap:15px;
margin-top:20px;
}

.card{
background:white;
border-radius:15px;
padding:15px;
text-align:center;
box-shadow:0 4px 10px rgba(0,0,0,0.1);
cursor:pointer;
}

/* ===== EDITOR ===== */

#editor{
display:none;
height:100vh;
}

#tools{
position:fixed;
left:0;
top:0;
width:70px;
height:100%;
background:#111;
padding:10px;
}

.tool{
background:white;
margin:10px 0;
padding:10px;
border-radius:10px;
text-align:center;
font-size:12px;
cursor:pointer;
}

#canvasArea{
margin-left:80px;
height:100vh;
display:flex;
justify-content:center;
align-items:center;
}

canvas{
background:white;
box-shadow:0 0 20px rgba(0,0,0,0.2);
touch-action:none;
}

</style>
</head>

<body>

<!-- ===== HOME ===== -->

<div id="home">
<h1>Design 5G</h1>

<div class="grid">
<div class="card" onclick="openEditor()">Instagram</div>
<div class="card" onclick="openEditor()">Poster</div>
<div class="card" onclick="openEditor()">Story</div>
</div>
</div>

<!-- ===== EDITOR ===== -->

<div id="editor">

<div id="tools">
<div class="tool" onclick="addText()">Texte</div>
<div class="tool" onclick="addImage()">Image</div>
<div class="tool" onclick="downloadPNG()">PNG</div>
</div>

<div id="canvasArea">
<canvas id="canvas" width="400" height="400"></canvas>
</div>

<input type="file" id="imgLoader" accept="image/*" hidden>

</div>

<script>

const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");

let elements=[];
let selected=null;
let offsetX,offsetY;

/* ===== NAVIGATION ===== */

function openEditor(){
document.getElementById("home").style.display="none";
document.getElementById("editor").style.display="block";
draw();
}

/* ===== ADD TEXT ===== */

function addText(){
elements.push({
type:"text",
text:"Design 5G",
x:150,
y:200
});
draw();
}

/* ===== ADD IMAGE ===== */

function addImage(){
document.getElementById("imgLoader").click();
}

document.getElementById("imgLoader").onchange=e=>{
let file=e.target.files[0];
let img=new Image();
img.onload=()=>{
elements.push({
type:"image",
img:img,
x:100,
y:100,
w:150,
h:150
});
draw();
};
img.src=URL.createObjectURL(file);
};

/* ===== DRAW ===== */

function draw(){
ctx.clearRect(0,0,canvas.width,canvas.height);

elements.forEach(el=>{
if(el.type==="text"){
ctx.font="30px Arial";
ctx.fillText(el.text,el.x,el.y);
}
if(el.type==="image"){
ctx.drawImage(el.img,el.x,el.y,el.w,el.h);
}
});
}

/* ===== DRAG MOBILE ===== */

canvas.addEventListener("pointerdown",e=>{
const rect=canvas.getBoundingClientRect();
let x=e.clientX-rect.left;
let y=e.clientY-rect.top;

selected=elements.find(el=>{
if(el.type==="text"){
return x>el.x && x<el.x+150 && y>el.y-30 && y<el.y;
}
if(el.type==="image"){
return x>el.x && x<el.x+el.w && y>el.y && y<el.y+el.h;
}
});

if(selected){
offsetX=x-selected.x;
offsetY=y-selected.y;
}
});

canvas.addEventListener("pointermove",e=>{
if(!selected) return;

const rect=canvas.getBoundingClientRect();
selected.x=e.clientX-rect.left-offsetX;
selected.y=e.clientY-rect.top-offsetY;

draw();
});

canvas.addEventListener("pointerup",()=>selected=null);

/* ===== EXPORT ===== */

function downloadPNG(){
let link=document.createElement("a");
link.download="design5g.png";
link.href=canvas.toDataURL();
link.click();
}

</script>

</body>
</html>
