<!DOCTYPE html>
<html lang="fr">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Design 5G</title>

<!-- ===== STYLE ===== -->
<style>

/* ===== RESET ===== */
*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:Arial, sans-serif;
}

body{
background:#f3f4f6;
overflow:hidden;
}

/* ===== HOME ===== */
#home{
padding:20px;
text-align:center;
height:100vh;
overflow:auto;
}

.title{
font-size:28px;
font-weight:bold;
margin-bottom:20px;
}

.grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
gap:15px;
}

.card{
background:#fff;
padding:25px;
border-radius:16px;
box-shadow:0 6px 18px rgba(0,0,0,.1);
cursor:pointer;
transition:.2s;
}

.card:active{
transform:scale(.96);
}

/* ===== EDITOR ===== */
#editor{
display:none;
height:100vh;
}

/* sidebar */
#sidebar{
position:fixed;
left:0;
top:0;
width:85px;
height:100%;
background:#111;
display:flex;
flex-direction:column;
align-items:center;
padding-top:10px;
}

.tool{
background:#fff;
margin:8px 0;
padding:12px;
border-radius:12px;
font-size:12px;
text-align:center;
cursor:pointer;
width:65px;
}

/* canvas zone */
#workspace{
margin-left:85px;
height:100vh;
display:flex;
justify-content:center;
align-items:center;
}

canvas{
background:#fff;
box-shadow:0 0 30px rgba(0,0,0,.2);
touch-action:none;
}

/* controls */
#controls{
position:fixed;
bottom:0;
left:85px;
right:0;
background:#fff;
padding:10px;
display:flex;
gap:10px;
box-shadow:0 -3px 12px rgba(0,0,0,.15);
}

</style>
</head>

<body>

<!-- ===== HOME ===== -->
<section id="home">
<div class="title">ðŸ”¥ Design 5G</div>

<div class="grid">
<div class="card" onclick="openEditor()">Instagram Post</div>
<div class="card" onclick="openEditor()">Poster</div>
</div>
</section>

<!-- ===== EDITOR ===== -->
<section id="editor">

<div id="sidebar">
<div class="tool" onclick="addText()">Texte</div>
<div class="tool" onclick="addImage()">Image</div>
<div class="tool" onclick="downloadPNG()">PNG</div>
</div>

<div id="workspace">
<canvas id="canvas" width="400" height="400"></canvas>
</div>

<div id="controls">
<input type="color" id="colorPicker">
<input type="range" id="sizeSlider" min="20" max="80">
</div>

<input type="file" id="imgLoader" hidden accept="image/*">

</section>

<!-- ===== SCRIPT ===== -->
<script>

/* ===== STATE ===== */
const home=document.getElementById("home");
const editor=document.getElementById("editor");
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");

let elements=[];
let selected=null;
let offsetX=0,offsetY=0;

/* ===== NAVIGATION ===== */
function openEditor(){
home.style.display="none";
editor.style.display="block";
draw();
}

/* ===== DRAW ===== */
function draw(){
ctx.clearRect(0,0,canvas.width,canvas.height);

elements.forEach(el=>{
if(el.type==="text"){
ctx.fillStyle=el.color;
ctx.font=el.size+"px Arial";
ctx.fillText(el.text,el.x,el.y);
}

if(el.type==="image"){
ctx.drawImage(el.img,el.x,el.y,el.w,el.h);
}
});
}

/* ===== ADD TEXT ===== */
function addText(){
elements.push({
type:"text",
text:"Design 5G",
x:150,
y:200,
size:40,
color:"#000"
});
draw();
}

/* ===== ADD IMAGE ===== */
const imgLoader=document.getElementById("imgLoader");

function addImage(){
imgLoader.click();
}

imgLoader.onchange=e=>{
const file=e.target.files[0];
const img=new Image();
img.onload=()=>{
elements.push({
type:"image",
img:img,
x:100,
y:100,
w:150,
h:150
});
draw();
};
img.src=URL.createObjectURL(file);
};

/* ===== DRAG ===== */
canvas.onpointerdown=e=>{
const rect=canvas.getBoundingClientRect();
const x=e.clientX-rect.left;
const y=e.clientY-rect.top;

selected=[...elements].reverse().find(el=>{
if(el.type==="text")
return x>el.x && x<el.x+200 && y>el.y-40 && y<el.y;

if(el.type==="image")
return x>el.x && x<el.x+el.w && y>el.y && y<el.y+el.h;
});

if(selected){
offsetX=x-selected.x;
offsetY=y-selected.y;
}
};

canvas.onpointermove=e=>{
if(!selected)return;
const rect=canvas.getBoundingClientRect();
selected.x=e.clientX-rect.left-offsetX;
selected.y=e.clientY-rect.top-offsetY;
draw();
};

canvas.onpointerup=()=>selected=null;

/* ===== CONTROLS ===== */
document.getElementById("colorPicker").oninput=e=>{
if(selected?.type==="text"){
selected.color=e.target.value;
draw();
}
};

document.getElementById("sizeSlider").oninput=e=>{
if(selected?.type==="text"){
selected.size=e.target.value;
draw();
}
};

/* ===== EXPORT ===== */
function downloadPNG(){
const link=document.createElement("a");
link.download="design5g.png";
link.href=canvas.toDataURL("image/png",1);
link.click();
}

</script>

</body>
</html>
