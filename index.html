<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Design 5G</title>

<style>
body{
margin:0;
font-family:Arial;
background:#111;
color:white;
text-align:center;
}

header{
background:#000;
padding:12px;
font-size:20px;
font-weight:bold;
}

.toolbar{
display:flex;
gap:8px;
overflow:auto;
padding:10px;
background:#1c1c1c;
}

button{
padding:10px;
border:none;
border-radius:8px;
background:#00c2ff;
color:white;
font-weight:bold;
}

#canvasBox{
display:flex;
justify-content:center;
margin-top:10px;
}

canvas{
background:white;
touch-action:none;
border-radius:12px;
}
</style>
</head>

<body>

<header>ðŸŽ¨ Design 5G Editor</header>

<div class="toolbar">
<button onclick="addText()">Texte</button>
<input type="file" id="imgLoader" accept="image/*">
<button onclick="changeColor()">Couleur</button>
<button onclick="saveProject()">Sauvegarder</button>
<button onclick="exportPNG()">Export PNG</button>
</div>

<div id="canvasBox">
<canvas id="canvas" width="350" height="500"></canvas>
</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

let elements = [];
let selected = null;

function draw(){
ctx.clearRect(0,0,canvas.width,canvas.height);

elements.forEach(el=>{
if(el.type==="text"){
ctx.fillStyle=el.color;
ctx.font=el.size+"px Arial";
ctx.fillText(el.text,el.x,el.y);
}
if(el.type==="image"){
ctx.drawImage(el.img,el.x,el.y,el.w,el.h);
}
});
}

function addText(){
elements.push({
type:"text",
text:"Design 5G",
x:100,
y:100,
size:30,
color:"#000"
});
draw();
}

document.getElementById("imgLoader").addEventListener("change",e=>{
const file=e.target.files[0];
const img=new Image();
img.onload=function(){
elements.push({
type:"image",
img:img,
x:50,
y:50,
w:150,
h:150
});
draw();
};
img.src=URL.createObjectURL(file);
});

function changeColor(){
if(!elements.length) return;
elements[elements.length-1].color=
"#"+Math.floor(Math.random()*16777215).toString(16);
draw();
}

let dragging=false;

canvas.addEventListener("touchstart",e=>{
const t=e.touches[0];
selected=elements[elements.length-1];
dragging=true;
});

canvas.addEventListener("touchmove",e=>{
if(!dragging || !selected) return;
const rect=canvas.getBoundingClientRect();
selected.x=e.touches[0].clientX-rect.left;
selected.y=e.touches[0].clientY-rect.top;
draw();
});

canvas.addEventListener("touchend",()=>{
dragging=false;
});

function saveProject(){
localStorage.setItem("design5g",
JSON.stringify(elements.map(e=>{
if(e.type==="text") return e;
return {type:"image",x:e.x,y:e.y,w:e.w,h:e.h};
}))
);
alert("Projet sauvegardÃ© âœ…");
}

function exportPNG(){
const link=document.createElement("a");
link.download="design5g.png";
link.href=canvas.toDataURL();
link.click();
}

draw();
</script>

</body>
</html>
